
\section{Methods}
\label{sec:methods}

We have briefly introduced the concept of
\emph{methods}. In the last section we have seen that they have an
\emph{identifier}, like variables, and that they have (round)
brackets. Sometimes we can put variables or values inside the brackets
like with methods \verb+charAt()+ or \verb+substring()+ of class
String. 

Let's look at methods in a bit more detail now, because they are very
important. 

\subsection{Why are methods important?}

Imagine that you are writing a program in which you need to make some
checks on user input. For example, your program needs the user to
introduce several logins/usernames and the program must make sure that
they do not contain spaces and they are all lower case letters. You
could have some code like:

\begin{verbatim}
    String login = System.console().readLine();
    boolean loginIsValid = true;
    for (int i = 0; i < login.length(); i++) {
        char c = login.charAt(i);
        if (!Character.isLetter(c) || !Character.isLowerCase(c)) {
            loginIsValid = false;
        }
    }
\end{verbatim}

As you can see, the loop goes through the whole length of the string
\emph{login} checking that each and every character is a letter in
lower case. If that is not the case, the boolean flag
\emph{loginIsValid} is set to \verb+false+ so the program knows that a
new login must be asked from the user.

Now you can think of this code being necessary at different parts of
your program. This can be useful (1) when you are adding new users to the
program, (2) when you are changing the username of a user, and (3) when
you want to remove a user from the system, to name but a few. If you
have to write the same code for every single place that you need it,
you have too problems.

First of all, it is \textbf{boring}. You have to type it several
times. Even if you copy--and--paste, you have to find the file where
it is (normal programming projects have tens of hundreds of source
code files, and sometimes they are quite long). Programmers like to
make computers work for them and not the other way around.

Second, but most important, if you find an error (a so-called
\emph{bug}) in those lines of code, you only need to fix in one
place. If you have to fix it in several places, sooner or later you
will forget to do it because you are human. That means that your
program will still be \emph{buggy} even if you are sure you have fixed
it, which is the worse thing than can happen to you. There is a very
important rule in programming that is usually referred to as the DIE
principle: 

\begin{center}
\vspace{1cm}
\textbf{\large DIE: Duplication Is Evil}
\vspace{1cm}
\end{center}

Duplication of information will result in problems sooner or later, so
we must avoid it. This is what methods are for. They allow the
programmer to put code in just one place that can be used from
anywhere else in the program. This means that, for example, if you
need to fix a bug, you fix it in only one place; and if you need to
improve the code to add a new feature, or to make it faster, or for
any other reason, you only need to change it in one place. That way
you are sure that you fix things once and forever. 

Besides, separating code in methods also makes your code
clearer. Compare the easiness of reading the code above with the
following statement: 

\begin{verbatim}
    String login = System.console().readLine();
    boolean loginIsValid = containsOnlyLowerCaseLetters(login)
\end{verbatim}

What is under the hood of that \verb+containsOnlyLowerCaseLetters()+
method? Let's see it. 

\subsection{Defining a method}

A method is defined by its name, its return type, and the parameters
inside the brackets. We will look at parameters in the next section.

A method's name must be an identifier
like those used for variables: starting with a letter and consisting
of letters, digits, and underscores (``\_''). Actually, underscores
are rarely used when you are programming in Java. Methods
usually have names consisting of a single word
(e.g.~\verb+length()+) or several words in so-called \emph{camel case}
starting with a verb (e.g.~\verb+isLetter()+
or~\verb+containsOnlyLowerCaseLetters()+). Note that variables usually
have identifiers that are a noun or an adjective, not a verb.

The return type of a method is a data type, simple or complex, that is
returned by the method when it finishes. When a method finishes, it
must return a value of the appropriate data type by using the keyword
\verb+return+. For example, the method we defined above could look
like the following code:

\begin{verbatim}
    boolean containsOnlyLowerCaseLetters(String login) {
        boolean result = true;
        for (int i = 0; i < login.length(); i++) {
            char c = login.charAt(i);
            if (!Character.isLetter(c) || !Character.isLowerCase(c)) {
                loginIsValid = false;
            }
        }
        return result;
    }
\end{verbatim}

Note that the code is the same that we wrote before. The difference is
we only need to write it once and can use it from anywhere else in the
program just by using its name. We are avoiding duplication of
code. That is good. 

You will notice that this method has a return type ``boolean'', so we
must create a boolean variable and return it at the end. The return
statement is the last statement that is executed inside any method:
once you return the value, there is nothing else to do. This means
that we can make our method a bit more efficient by returning early: 

\begin{verbatim}
    boolean containsOnlyLowerCaseLetters(String login) {
        for (int i = 0; i < login.length(); i++) {
            char c = login.charAt(i);
            if (!Character.isLetter(c) || !Character.isLowerCase(c)) {
                return false;
            }
        }
        return true;
    }
\end{verbatim}

Instead of traversing the whole string, we return \verb+false+ as soon
as we find a character in the login that is not a letter or is not
in lower case. If we arrive at the end of the login, that means that
all characters are fine and we can return \verb+true+. Note that the
loop is automatically terminated when the method is finished,
i.e.~when the return value is given back. It does not matter if the
loop has run to the end or not, or whether there is more code after
the \verb+return+ statement. 

You have noticed that there is something inside the round brackets, a
String called \emph{login}, that is used inside the method. The
variables inside the round brackets are called the \emph{parameters} of the
method. 

\subsection{Positional paramenters}
\label{sec:pospar}


% positional parameters

% using methods

% scope and duplication of variables
  % beware of complex types!

% methods in classes

% side effects

% access levels


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
